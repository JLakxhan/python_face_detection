{% extends 'includes/layout.html' %}
{% load static %}
{% block content %}
<div class="container">
    <h1>Create Employee</h1>
    <form  class="employee-form">
        {% csrf_token %}
        
        <div class="create-employee-form">
            <div class="form-field">
                <label for="first_name">First Name <span style="color: red;">*</span></label>
                <input type="text" id="first_name" placeholder="Enter first name" />
            </div>
            <div class="form-field">
                <label for="last_name">Last Name <span style="color: red;">*</span></label>
                <input type="text" id="last_name" placeholder="Enter last name" />
            </div>

            <!-- Row 1 -->
            <div class="form-field">
                <label for="email">Email <span style="color: red;">*</span></label>
                <input type="email" id="email" placeholder="Enter email" />
            </div>
            <div class="form-field">
                <label for="username">Username <span style="color: red;">*</span></label>
                <input type="text" id="username" placeholder="Enter username" />
            </div>
            
            <!-- Row 2 -->
            <div class="form-field">
                <label for="password">Password <span style="color: red;">*</span></label>
                <input type="password" id="password" placeholder="Enter password" />
            </div>
            <div class="form-field">
                <label for="is_superuser">Role <span style="color: red;">*</span></label>
                <select id="is_superuser">
                    <option value="1">Admin</option>
                    <option value="0">User</option>
                </select>
            </div>
            
            <!-- Row 3 -->
            <div class="form-field">
                <label for="employee_id">Employee ID <span style="color: red;">*</span></label>
                <input type="text" id="employee_id" placeholder="Enter employee ID" />
            </div>
            <div class="form-field">
                <label for="joined_date">Joined Date <span style="color: red;">*</span></label>
                <input type="date" id="joined_date" />
            </div>
            <!-- Row 4 -->
            
           
            <div class="form-field">
                <label for="date_of_birth">Date of Birth <span style="color: red;">*</span></label>
                <input type="date" id="date_of_birth" />
            </div>
            <!-- Row 5 -->
            <div class="form-field">
                <label for="bio">Designation <span style="color: red;">*</span></label>
                <input type="text" id="bio" placeholder="Enter designation" />
            </div>
           
            
            <!-- Row 6 -->
            <div class="form-field">
                <label for="contact_number">Contact Number <span style="color: red;">*</span></label>
                <input type="text" id="contact_number" placeholder="Enter contact number" />
            </div>
            <!-- Row 10 -->
            <div class="form-field">
                <label for="personal_email">Personal Email <span style="color: red;">*</span></label>
                <input type="email" id="personal_email" placeholder="Enter personal email" />
            </div>
            <div class="form-field">
                <label for="address">Address</label>
                <input type="text" id="address" placeholder="Enter address" />
            </div>
            
            
            <!-- Row 7 -->
            <div class="form-field">
                <label for="emergency_contact_name">Emergency Contact Name</label>
                <input type="text" id="emergency_contact_name" placeholder="Enter emergency contact name" />
            </div>
            <div class="form-field">
                <label for="emergency_contact_number">Emergency Contact Number</label>
                <input type="text" id="emergency_contact_number" placeholder="Enter emergency contact number" />
            </div>
            
            <!-- Row 8 -->
            <div class="form-field">
                <label for="emergency_contact_relationship">Emergency Contact Relationship</label>
                <input type="text" id="emergency_contact_relationship" placeholder="Enter relationship" />
            </div>
            <div class="form-field">
                <label for="identity_number">Identity Number</label>
                <input type="text" id="identity_number" placeholder="Enter identity number" />
            </div>
            
            <!-- Row 9 -->
            
            <div class="form-field">
                <label for="passport_number">Passport Number</label>
                <input type="text" id="passport_number" placeholder="Enter passport number" />
            </div>
            
            
        
            <!-- Action Buttons -->
            <div class="form-actions">
                <button class="button-dark" type="button" onclick="createUser()">Create Employee</button>
            </div>
        </div>
    </form>
</div>

<style>
 .create-employee-form {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* Two columns per row */
    gap: 15px; /* Reduced gap for better compactness */
    padding: 20px;
    max-width: 900px; /* Wider form to fit all fields */
    margin: 0 auto; /* Center the form */
    background: #ffffff; /* Light background for clarity */
    border-radius: 8px; /* Rounded corners */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Depth for the form */
}

.form-field {
    display: flex;
    flex-direction: column;
}

.form-field label {
    font-size: 14px;
    color: #293963;
    margin-bottom: 5px;
}

.form-field input,
.form-field select {
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 14px;
}

.form-actions {
    grid-column: span 2; /* Spans the entire row */
    text-align: right;
    margin-top: 20px;
}



@media (max-width: 768px) {
    .create-employee-form {
        grid-template-columns: 1fr; /* Single column on smaller screens */
    }
    .form-actions {
        text-align: center;
    }
}

</style>
<script>
    function createUser(){
        const formData = new FormData();
        first_name = $("#first_name").val()
        last_name = $("#last_name").val()
        email = $("#email").val()
        username = $("#username").val()
        password = $("#password").val()
        is_superuser = $("#is_superuser").val()
        employee_id = $("#employee_id").val()
        joined_date = $("#joined_date").val()
        bio = $("#bio").val()
        address = $("#address").val()
        contact_number = $("#contact_number").val()
        date_of_birth = $("#date_of_birth").val()
        emergency_contact_name = $("#emergency_contact_name").val()
        emergency_contact_number = $("#emergency_contact_number").val()
        emergency_contact_relationship = $("#emergency_contact_relationship").val()
        identity_number = $("#identity_number").val()
        passport_number = $("#passport_number").val()
        personal_email = $("#personal_email").val()

        if(first_name == '' || last_name == '' || email == '' || username == '' || password == '' || employee_id == '' || joined_date == '' || bio == ''  || contact_number == '' || date_of_birth == ''  || personal_email == ''){
            showToast("Please enter all the required fields.", "error");
        }else{
            formData.append('fname', first_name);
            formData.append('lname', last_name);
            formData.append('username', username);
            formData.append('email', email);
            formData.append('password', password);
            formData.append('role', is_superuser);
            formData.append('employee_id', employee_id);
            formData.append('joined_date', joined_date);
            formData.append('bio', bio);
            formData.append('address', address);
            formData.append('contact_number', contact_number);
            formData.append('date_of_birth', date_of_birth);
            formData.append('emergency_contact_name', emergency_contact_name);
            formData.append('emergency_contact_number', emergency_contact_number);
            formData.append('emergency_contact_relationship', emergency_contact_relationship);
            formData.append('identity_number', identity_number);
            formData.append('passport_number', passport_number);
            formData.append('personal_email', personal_email);

            fetch("/users/create/", {
                method: "POST",
                headers: { "X-CSRFToken": csrfToken },
                body: formData,
            })
            .then(response => response.json())
            .then(data => {
                if (data.code === 1) {
                    showToast(data.data);
                    $("#first_name").val('')
                    $("#last_name").val('')
                    $("#email").val('')
                    $("#username").val('')
                    $("#password").val('')
                    $("#is_superuser").val(1)
                    $("#employee_id").val('')
                    $("#joined_date").val('')
                    $("#bio").val('')
                    $("#address").val('')
                    $("#contact_number").val('')
                    $("#date_of_birth").val('')
                    $("#emergency_contact_name").val('')
                    $("#emergency_contact_number").val('')
                    $("#emergency_contact_relationship").val('')
                    $("#identity_number").val('')
                    $("#passport_number").val('')
                    $("#personal_email").val('')
                } else {
                    showToast(data.data, "error");
                    showToast("Connection error. Please check backend.", "error");
                }
            })
            .catch(error => {
                console.error("Fetch Error:", error);
                showToast("Connection error. Please check backend.", "error");
            });
        }
    }
</script>
{% endblock %}
